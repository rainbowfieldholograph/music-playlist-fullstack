(this["webpackJsonpmusic-playlist"]=this["webpackJsonpmusic-playlist"]||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n,c,r=a(3),i=a.n(r),s=a(57),l=a.n(s),o=(a(111),a(112),a(31)),u=a.n(o),d=a(50),j=a(79),p=a.n(j),b=a(42),h=a(90),x=a(91),m=a(13),k=function(){function e(){Object(h.a)(this,e),this.tracks=[],this.currentTrack=null,this.playing=!1,this.isLoading=!0,this.volume=1,this.currentTime=0,this.duration=0,this.url="".concat("https://eyes-closed-server.herokuapp.com","/graphql"),Object(m.d)(this,{},{autoBind:!0})}return Object(x.a)(e,[{key:"setDuration",value:function(e){this.duration=e}},{key:"setCurrentTime",value:function(e){this.currentTime=e}},{key:"setVolume",value:function(e){this.volume=e}},{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setTracks",value:function(e){this.tracks=e}},{key:"setPlaying",value:function(e){this.playing=e}},{key:"setCurrentTrack",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currentTrack=e,this.setPlaying(t)}},{key:"addToTracks",value:function(e){this.tracks.push(e)}},{key:"prevTrack",value:function(){var e=this.tracks.indexOf(this.currentTrack);0===e?this.setCurrentTrack(this.tracks[this.tracks.length-1]):this.setCurrentTrack(this.tracks[e-1])}},{key:"nextTrack",value:function(){var e=this.tracks.indexOf(this.currentTrack);e===this.tracks.length-1?this.setCurrentTrack(this.tracks[0]):this.setCurrentTrack(this.tracks[e+1])}},{key:"handleEnd",value:function(){this.nextTrack()}}]),e}(),f=new k,_=a(43),O=a(70),v=a.n(O),g=a(34),y=a(92),T=a.n(y),N=a(2),C=function(){return Object(N.jsx)("div",{className:T.a.box,children:Object(N.jsx)(_.a,{style:{fontSize:"1.7rem"},icon:g.a,color:"black"})})},P=function(e){var t=e.toggleAudio,a=e.nextTrack,n=e.prevTrack,c=e.playing;return Object(N.jsxs)("div",{className:v.a.wrapper,children:[Object(N.jsx)("div",{className:v.a.musicImage,children:Object(N.jsx)(C,{})}),Object(N.jsx)(_.a,{className:"clickable",onClick:t,style:{fontSize:"2.5rem"},icon:c?g.b:g.c,color:"black"}),Object(N.jsxs)("div",{className:v.a.rewindControls,children:[Object(N.jsx)(_.a,{className:"clickable",style:{fontSize:"1.5rem"},icon:g.d,color:"black",onClick:n}),Object(N.jsx)(_.a,{className:"clickable",style:{fontSize:"1.5rem"},icon:g.e,color:"black",onClick:a})]})]})},w=a(36),I=a.n(w),B=function(e){var t=Math.floor(e/60),a=Math.floor(e%60),n=t<10?"0".concat(t):"".concat(t),c=a<10?"0".concat(a):"".concat(a);return"".concat(n,":").concat(c)},S=function(e){var t=e.track,a=e.duration,n=e.currentTime,c=e.handleProgress;return Object(N.jsxs)("div",{className:I.a.info,children:[Object(N.jsxs)("div",{className:I.a.infoInnerBox,children:[Object(N.jsx)("h2",{className:I.a.title,children:null===t||void 0===t?void 0:t.title}),Object(N.jsx)("p",{children:B(a)})]}),Object(N.jsxs)("div",{className:I.a.infoInnerBox,children:[Object(N.jsx)("h3",{className:I.a.title,children:null===t||void 0===t?void 0:t.author}),Object(N.jsx)("p",{children:B(n)})]}),Object(N.jsx)("input",{className:I.a.progressBar,type:"range",onChange:c,value:a?Math.round(100*n/a):0})]})},M=a(80),F=a.n(M),U=function(e){var t=e.volumeState,a=e.handleVolume;return Object(N.jsxs)("div",{className:F.a.box,children:[Object(N.jsxs)("p",{className:F.a.title,children:["Volume: ",Math.round(100*t),"%"]}),Object(N.jsx)("input",{className:"clickable",type:"range",value:Math.round(100*t),onChange:function(e){return a(e)}})]})},A=new Audio,L=!0,V=Object(b.a)((function(){var e=f.currentTime,t=f.duration,a=f.volume,n=f.playing,c=f.currentTrack,i=f.nextTrack,s=f.prevTrack,l=f.setCurrentTime,o=f.setDuration,j=f.setVolume,b=f.setPlaying,h=f.handleEnd;Object(r.useEffect)((function(){c&&(A.src=c.src,A.ontimeupdate=function(){return l(A.currentTime)},A.onloadeddata=function(){L=!0,o(A.duration)},A.onended=function(){L=!1,h()},x())}),[c]);var x=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.paused){e.next=12;break}return b(!0),e.prev=2,e.next=5,A.play();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:e.next=14;break;case 12:b(!1),A.pause();case 14:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return c?Object(N.jsx)("div",{className:p.a.player,children:Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(P,{toggleAudio:x,nextTrack:i,prevTrack:s,playing:n}),Object(N.jsx)("div",{className:p.a.musicImage,children:Object(N.jsx)(C,{})}),Object(N.jsx)(S,{track:c,duration:t,currentTime:e,handleProgress:function(e){if(L){var a=e.target.value*t/100;A.currentTime=a,l(a)}}}),Object(N.jsx)(U,{volumeState:a,handleVolume:function(e){var t=e.target.value/100;j(t),A.volume=t}})]})}):null})),q=V,E=a(35),$=a(81),z=a.n($),D=function(){return Object(N.jsx)("div",{className:z.a.loadingWrapper,children:Object(N.jsx)("div",{className:z.a.loading})})},W=a(25),Y=a.n(W),G=Object(b.a)((function(e){var t=e.track,a=e.index,n=f.tracks,c=f.setCurrentTrack,r=f.currentTrack,i=!1;return r&&(i=n[a].id===r.id),Object(N.jsxs)("button",{className:i?"".concat(Y.a.track," ").concat(Y.a.active):Y.a.track,onClick:function(){return!i&&c(t)},children:[Object(N.jsx)("div",{className:Y.a.trackBox}),Object(N.jsxs)("div",{className:Y.a.info,children:[Object(N.jsx)("div",{className:Y.a.innerBox,children:Object(N.jsx)("h2",{className:Y.a.text,children:t.title})}),Object(N.jsx)("div",{className:Y.a.innerBox,children:Object(N.jsx)("h3",{className:Y.a.text,children:t.author})})]})]})})),J=a(45),Z=a.n(J),H=a(54),K=a.n(H),R=a(139),X=a(55),Q=a.n(X),ee=a(64),te=a(39),ae=Object(te.d)(n||(n=Object(ee.a)(["\n  mutation addTrack($title: String!, $author: String!, $file: Upload!) {\n    addTrack(title: $title, author: $author, file: $file) {\n      src\n      author\n      title\n      id\n    }\n  }\n"]))),ne=a(93),ce=a.n(ne),re=Object(r.memo)((function(e){var t=e.inputState,a=e.setInputState,n=e.label,c=e.id;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("label",{htmlFor:c,children:Object(N.jsx)("h3",{children:n})}),Object(N.jsx)("input",{id:c,required:!0,className:ce.a.input,value:t,onChange:function(e){return a(e.target.value)},type:"text"})]})})),ie=function(e){var t=e.setModal,a=f.addToTracks,n=Object(r.useState)(null),c=Object(E.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(""),o=Object(E.a)(l,2),j=o[0],p=o[1],b=Object(r.useState)(""),h=Object(E.a)(b,2),x=h[0],m=h[1],k=Object(R.a)(ae),_=Object(E.a)(k,2),O=_[0],v=_[1].loading,g=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.target.files[0];case 2:(a=e.sent).type.includes("audio/")?s(a):alert("\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 audio/mpeg \u0444\u0430\u0439\u043b");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(n){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,O({variables:{title:j,author:x,file:i}});case 4:c=e.sent,r=c.data.addTrack,a(r),t(!1),m(""),p(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),alert("Failed to upload track to server"),console.log("upload failed: ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return v?Object(N.jsxs)("div",{children:[Object(N.jsx)(D,{}),Object(N.jsx)("p",{className:Q.a.uploadTitle,children:"Uploading track. Please wait."})]}):Object(N.jsxs)("form",{action:"",onSubmit:y,children:[Object(N.jsx)("h1",{className:Q.a.title,children:"Upload Track"}),Object(N.jsx)(re,{inputState:x,setInputState:m,id:"author",label:"Author"}),Object(N.jsx)(re,{inputState:j,setInputState:p,id:"title",label:"Title"}),Object(N.jsx)("label",{htmlFor:"file",children:Object(N.jsx)("h1",{className:Q.a.uploadTitle,children:"Upload audio File"})}),Object(N.jsx)("input",{required:!0,id:"file",type:"file",accept:"audio/*",onChange:g}),Object(N.jsx)("button",{className:Q.a.btn,type:"submit",children:"UPLOAD TRACK"})]})},se=Object(r.memo)((function(e){var t=e.modal,a=e.setModal;return Object(N.jsx)("div",{onClick:function(){return a(!t)},className:t?"".concat(K.a.wrapper," ").concat(K.a.active):K.a.wrapper,children:Object(N.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:K.a.inner,children:Object(N.jsx)(ie,{setModal:a})})})})),le=a(137),oe=Object(te.d)(c||(c=Object(ee.a)(["\n  query GetAllTracks {\n    getAllTracks {\n      id\n      title\n      author\n      src\n    }\n  }\n"]))),ue=a(97),de=a.n(ue),je=function(){return Object(N.jsx)("div",{children:Object(N.jsx)("p",{className:de.a.title,children:"Connection Error"})})},pe=Object(b.a)((function(){var e=f.setTracks,t=f.tracks,a=Object(le.a)(oe,{onCompleted:function(t){var a=t.getAllTracks;e(a)}}),n=a.loading,c=a.error,i=Object(r.useState)(!1),s=Object(E.a)(i,2),l=s[0],o=s[1];return c?Object(N.jsx)(je,{}):n?Object(N.jsx)(D,{}):Object(N.jsxs)("section",{className:Z.a.playlist,children:[Object(N.jsxs)("div",{className:Z.a.buttonFlex,children:[Object(N.jsx)("h1",{className:Z.a.title,children:"Playlist: ".concat(t.length)}),Object(N.jsx)("button",{onClick:function(){return o(!l)},className:Z.a.btn,children:"Add new track"})]}),Object(N.jsx)("ul",{className:Z.a.tracksBlock,children:t.map((function(e,t){return Object(N.jsx)("li",{children:Object(N.jsx)(G,{track:e,index:t})},e.id)}))}),Object(N.jsx)(se,{modal:l,setModal:o})]})})),be=a(77),he=a(138),xe=a(135),me=a.n(xe),ke="".concat("https://eyes-closed-server.herokuapp.com","/graphql"),fe=me()({uri:ke}),_e=new be.a({link:fe,cache:new he.a}),Oe=a(136),ve=function(){return Object(N.jsx)(Oe.a,{client:_e,children:Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)(q,{}),Object(N.jsx)(pe,{})]})})};l.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(ve,{})}),document.getElementById("root"))},25:function(e,t,a){e.exports={track:"TrackItem_track__1FyQV",info:"TrackItem_info__2JbXp",innerBox:"TrackItem_innerBox__3vbsZ",text:"TrackItem_text__4G18P",active:"TrackItem_active__N_Pac",trackBox:"TrackItem_trackBox__32aAP"}},36:function(e,t,a){e.exports={infoInnerBox:"PlayerInfo_infoInnerBox__ZoIcs",title:"PlayerInfo_title__2Um7m",progressBar:"PlayerInfo_progressBar__2pcLC",info:"PlayerInfo_info__1_ZR_"}},45:function(e,t,a){e.exports={playlist:"Playlist_playlist__W8_YI",title:"Playlist_title__35xpX",buttonFlex:"Playlist_buttonFlex__3HBih",btn:"Playlist_btn__3H3G6",tracksBlock:"Playlist_tracksBlock__2h1D0"}},54:function(e,t,a){e.exports={wrapper:"UploadModal_wrapper__3yRYf",active:"UploadModal_active__36Haq",inner:"UploadModal_inner__3Kp__"}},55:function(e,t,a){e.exports={title:"UploadForm_title__3TYAS",btn:"UploadForm_btn__2j8Wb",uploadTitle:"UploadForm_uploadTitle__TUpZY"}},70:function(e,t,a){e.exports={wrapper:"PlayerControls_wrapper__1B9_M",rewindControls:"PlayerControls_rewindControls__-arGp",musicImage:"PlayerControls_musicImage__25dQk"}},79:function(e,t,a){e.exports={player:"Player_player__3VJ35",musicImage:"Player_musicImage__1w-aM"}},80:function(e,t,a){e.exports={box:"PlayerVolume_box__ztdcc",title:"PlayerVolume_title__1wp3r"}},81:function(e,t,a){e.exports={loadingWrapper:"Loading_loadingWrapper__2Lhoj",loading:"Loading_loading__-v3sh",load:"Loading_load__1ige4"}},92:function(e,t,a){e.exports={box:"PlayerMusicImage_box__1uK4L"}},93:function(e,t,a){e.exports={input:"FormInput_input__Owuwx"}},97:function(e,t,a){e.exports={title:"ErrorBlock_title__1a4YX"}}},[[129,1,2]]]);
//# sourceMappingURL=main.6b83efc3.chunk.js.map