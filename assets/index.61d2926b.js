var te=Object.defineProperty,ne=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(t,e,a)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,u=(t,e)=>{for(var a in e||(e={}))M.call(e,a)&&S(t,a,e[a]);if(b)for(var a of b(e))L.call(e,a)&&S(t,a,e[a]);return t},f=(t,e)=>ne(t,ae(e));var k=(t,e)=>{var a={};for(var r in t)M.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&b)for(var r of b(t))e.indexOf(r)<0&&L.call(t,r)&&(a[r]=t[r]);return a};var c=(t,e,a)=>(S(t,typeof e!="symbol"?e+"":e,a),a);import{j as $,c as h,m as _,u as p,r as l,a as oe,f as re,b as ie,d as A,e as le,I as se,A as ce,R as de,g as ue,h as me}from"./vendor.e5795c61.js";const he=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};he();const pe="_playlist_kw8bu_1",ke="_title_kw8bu_23",_e="_head_kw8bu_33";var C={playlist:pe,title:ke,head:_e};const ve="_title_xynlk_1";var ge={title:ve};const n=$.exports.jsx,s=$.exports.jsxs,Q=$.exports.Fragment,ye=a=>{var r=a,{className:t}=r,e=k(r,["className"]);return n("div",f(u({className:t},e),{children:n("p",{className:ge.title,children:"Connection Error"})}))},fe="_block_cfywl_1",xe="_center_cfywl_9";var B={block:fe,center:xe};const F=o=>{var i=o,{children:t,className:e,childsCenter:a}=i,r=k(i,["children","className","childsCenter"]);return n("div",f(u({className:h(B.block,e,{[B.center]:a})},r),{children:t}))},we="_loading_clven_1",be="_load_clven_1";var Ne={loading:we,load:be};const H=({className:t})=>n("div",{className:h(Ne.loading,t)}),Te="_tracksBlock_diz2w_1";var Ve={tracksBlock:Te};const Se="_track_1tc8r_1",Ce="_info_1tc8r_63",Ee="_text_1tc8r_77",$e="_active_1tc8r_95",Ae="_trackBox_1tc8r_109";var v={track:Se,info:Ce,text:Ee,active:$e,trackBox:Ae};const Ie=({title:t,active:e,subtitle:a,onClick:r})=>s("button",{onClick:()=>r(),className:h(v.track,{[v.active]:e}),children:[n("div",{className:v.trackBox}),s("div",{className:v.info,children:[n("h2",{className:v.text,children:t}),n("h3",{className:v.text,children:a})]})]});class Me{constructor(){c(this,"DISABLE_TIME",200);c(this,"DEFAULT_VOLUME",.2);c(this,"audio",new Audio);c(this,"currentTrackVar",_(null));c(this,"isPlayingVar",_(!1));c(this,"canChangeTimeVar",_(!0));c(this,"volumeVar",_(this.DEFAULT_VOLUME));c(this,"currentTimeVar",_(0));c(this,"durationVar",_(0));c(this,"switchTrack",(e,a)=>{const r=this.currentTrackVar();if(!e||!r)return;const o=e.findIndex(i=>i.id===r.id);switch(a){case"NEXT":o===e.length-1?this.currentTrackVar(e[0]):this.currentTrackVar(e[o+1]);break;case"PREV":o===0?this.currentTrackVar(e[e.length-1]):this.currentTrackVar(e[o-1]);break}});c(this,"prevTrack",e=>this.switchTrack(e,"PREV"));c(this,"nextTrack",e=>this.switchTrack(e,"NEXT"));c(this,"toggleAudio",async()=>{if(this.audio.paused){this.isPlayingVar(!0);try{await this.audio.play()}catch(e){console.log(e)}}else this.isPlayingVar(!1),this.audio.pause()});c(this,"initializeAudio",(e,a)=>{this.audio.src=e,this.audio.ontimeupdate=()=>this.currentTimeVar(this.audio.currentTime),this.audio.onloadeddata=()=>{setTimeout(()=>{this.canChangeTimeVar(!0)},this.DISABLE_TIME),this.durationVar(this.audio.duration)},this.audio.onended=()=>{this.canChangeTimeVar(!1),this.nextTrack(a)},this.audio.volume=this.DEFAULT_VOLUME})}}const w=new Me,Le=({data:t})=>{const{currentTrackVar:e}=w,a=p(e),r=o=>()=>e(o);return n("ul",{className:Ve.tracksBlock,children:t.map(o=>n("li",{children:n(Ie,{active:o.id===(a==null?void 0:a.id),onClick:r(o),title:o.title,subtitle:o.author})},o.id))})},Be="_button_3pli4_1";var Fe={button:Be};const J=r=>{var o=r,{children:t,className:e}=o,a=k(o,["children","className"]);return n("button",f(u({className:h(Fe.button,e)},a),{children:t}))},Pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"file"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addTrack"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"file"},value:{kind:"Variable",name:{kind:"Name",value:"file"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"src"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"src"}}]}}]}}]},De="__lock_1up8e_1",Ue="_modal_1up8e_9",Re="_overlay_1up8e_41";var N={_lock:De,modal:Ue,overlay:Re};const P=document.getElementById("modal"),Oe=({className:t,children:e,open:a,onClose:r})=>{const o=i=>{(i.key==="Esc"||i.key==="Escape")&&r()};return l.exports.useEffect(()=>{document.body.classList.add(N._lock)},[]),l.exports.useEffect(()=>{if(document.body.classList.toggle(N._lock),a)return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[a]),!a||!P?n(Q,{}):oe.exports.createPortal(n(re,{children:n("div",{onClick:()=>r(),className:N.overlay,children:n("div",{onClick:i=>i.stopPropagation(),role:"dialog",className:h(N.modal,t),children:e})})}),P)},ze="_form_1mtor_1",qe="_btn_1mtor_15",je="_uploadTitle_1mtor_27";var E={form:ze,btn:qe,uploadTitle:je};const Xe="_input_uv6sf_1";var Ge={input:Xe};const D=i=>{var d=i,{inputState:t,setInputState:e,labelText:a,className:r}=d,o=k(d,["inputState","setInputState","labelText","className"]);return s("label",{children:[n("h3",{children:a}),n("input",u({required:!0,className:h(Ge.input,r),value:t,onChange:g=>e(g.target.value),type:"text"},o))]})},Ke="_block_r92fe_1",Qe="_title_r92fe_17";var U={block:Ke,title:Qe};const He=({title:t="Uploading track. Please wait.",className:e})=>s("div",{className:h(U.block,e),children:[n("p",{className:U.title,children:t}),n(H,{})]}),Je=({onSubmit:t})=>{const[e,a]=l.exports.useState(null),[r,o]=l.exports.useState(""),[i,d]=l.exports.useState(""),[g,{loading:Y}]=ie(Pe),Z=V=>{var I;const y=(I=V.target.files)==null?void 0:I[0];y&&y.type.includes("audio/")?a(y):alert("Select audio/mpeg file")},ee=async V=>{V.preventDefault();try{await g({variables:{title:r,author:i,file:e},refetchQueries:[{query:T}]}),t(),d(""),o("")}catch(y){alert("An error occurred while uploading the track to the server"),console.log("Upload failed: ",y)}};return Y?n(He,{}):s("form",{className:E.form,action:"",onSubmit:ee,children:[n("h1",{children:"Upload Track"}),n(D,{inputState:i,setInputState:d,labelText:"Author"}),n(D,{inputState:r,setInputState:o,labelText:"Title"}),s("label",{children:[n("h1",{className:E.uploadTitle,children:"Upload audio File"}),n("input",{required:!0,type:"file",accept:"audio/*",onChange:Z})]}),n(J,{className:E.btn,type:"submit",children:"Upload Track"})]})},We="_uploadModal_16r2l_1";var Ye={uploadModal:We};const Ze=({isOpen:t,onClose:e})=>n(Oe,{className:Ye.uploadModal,open:t,onClose:e,children:n(Je,{onSubmit:e})}),et=({})=>{const{data:t,loading:e,error:a}=A(T),r=t==null?void 0:t.getAllTracks,[o,i]=l.exports.useState(!1),d=()=>i(!1),g=()=>i(!0);return a?n(F,{children:n(ye,{})}):e||!r?n(F,{childsCenter:!0,children:n(H,{})}):s("div",{className:C.playlist,children:[s("div",{className:C.head,children:[n("h1",{className:C.title,children:`Playlist: ${r.length}`}),n(J,{onClick:g,children:"Add new track"})]}),n(Le,{data:r}),n(Ze,{isOpen:o,onClose:d})]})},tt="_player_s12o8_1",nt="_musicImage_s12o8_59";var R={player:tt,musicImage:nt};const at="_rewindControls_11hra_1",ot="_button_11hra_13",rt="_toggleButton_11hra_73",it="_toggleIcon_11hra_91",lt="_arrowIcon_11hra_99",st="_inverse_11hra_107";var m={rewindControls:at,button:ot,toggleButton:rt,toggleIcon:it,arrowIcon:lt,inverse:st};const ct=t=>l.exports.createElement("svg",u({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 485 485",style:{enableBackground:"new 0 0 485 485"},xmlSpace:"preserve",width:"1em",height:"1em"},t),l.exports.createElement("g",null,l.exports.createElement("path",{d:"M413.974,71.026C368.171,25.225,307.274,0,242.5,0S116.829,25.225,71.026,71.026C25.225,116.829,0,177.726,0,242.5 s25.225,125.671,71.026,171.474C116.829,459.775,177.726,485,242.5,485s125.671-25.225,171.474-71.026 C459.775,368.171,485,307.274,485,242.5S459.775,116.829,413.974,71.026z M242.5,455C125.327,455,30,359.673,30,242.5 S125.327,30,242.5,30S455,125.327,455,242.5S359.673,455,242.5,455z"}),l.exports.createElement("rect",{x:172.5,y:140,width:55,height:205}),l.exports.createElement("rect",{x:257.5,y:140,width:55,height:205}))),dt=t=>l.exports.createElement("svg",u({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 485 485",style:{enableBackground:"new 0 0 485 485"},xmlSpace:"preserve",width:"1em",height:"1em"},t),l.exports.createElement("g",null,l.exports.createElement("path",{d:"M413.974,71.026C368.171,25.225,307.274,0,242.5,0S116.829,25.225,71.026,71.026C25.225,116.829,0,177.726,0,242.5 s25.225,125.671,71.026,171.474C116.829,459.775,177.726,485,242.5,485s125.671-25.225,171.474-71.026 C459.775,368.171,485,307.274,485,242.5S459.775,116.829,413.974,71.026z M242.5,455C125.327,455,30,359.673,30,242.5 S125.327,30,242.5,30S455,125.327,455,242.5S359.673,455,242.5,455z"}),l.exports.createElement("polygon",{points:"181.062,336.575 343.938,242.5 181.062,148.425  "}))),O=t=>l.exports.createElement("svg",u({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 224.175 224.175",style:{enableBackground:"new 0 0 224.175 224.175"},xmlSpace:"preserve",width:"1em",height:"1em"},t),l.exports.createElement("g",null,l.exports.createElement("path",{d:"M185.513,0L185.513,0c-7.4,0-13.7,6.3-13.7,14.2v71.9L46.213,2.2c-2.1-1-4.7-2.1-7.9-2.1c-7.4,0-13.7,6.3-13.7,14.2V210 c0,11,12.6,17.8,21.5,11.5l125.6-83.4V210c-0.5,18.9,28.4,18.9,27.8,0V14.3C200.213,6.3,193.413,0,185.513,0z M52.513,183.7V39.9 l108.2,71.9L52.513,183.7z"}))),{prevTrack:ut,nextTrack:mt,toggleAudio:ht,isPlayingVar:pt}=w,kt=({})=>{const{data:t}=A(T),e=t==null?void 0:t.getAllTracks,a=p(pt),r=o=>o?n(ct,{className:m.toggleIcon}):n(dt,{className:m.toggleIcon});return s(Q,{children:[n("button",{className:h(m.button,m.toggleButton),onClick:()=>ht(),children:r(a)}),s("div",{className:m.rewindControls,children:[n("button",{className:m.button,onClick:()=>ut(e),children:n(O,{className:h(m.arrowIcon,m.inverse)})}),n("button",{className:m.button,onClick:()=>mt(e),children:n(O,{className:m.arrowIcon})})]})]})},_t="_box_1x3q1_1",vt="_title_1x3q1_19";var z={box:_t,title:vt};const{volumeVar:W,audio:gt}=w,yt=t=>{const e=+t.target.value/100;W(e)},ft=({})=>{const t=p(W),e=Math.round(t*100);return l.exports.useEffect(()=>{gt.volume=t},[t]),s("div",{className:z.box,children:[s("p",{className:z.title,children:["Volume: ",e,"%"]}),n("input",{type:"range",value:e,onChange:yt})]})},xt="_box_1i7xp_1",wt="_icon_1i7xp_25";var q={box:xt,icon:wt};const bt=t=>l.exports.createElement("svg",u({width:"1em",height:"1em",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},t),l.exports.createElement("path",{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"})),Nt=a=>{var r=a,{className:t}=r,e=k(r,["className"]);return n("div",f(u({className:h(q.box,t)},e),{children:n(bt,{className:q.icon})}))},j=t=>t<10?`0${t}`:`${t}`,X=t=>{const e=Math.floor(t/60),a=Math.floor(t%60);return`${j(e)}:${j(a)}`},Tt="_info_px7rt_1",Vt="_box_px7rt_9",St="_title_px7rt_23";var x={info:Tt,box:Vt,title:St};const{currentTimeVar:G,canChangeTimeVar:Ct,audio:Et,durationVar:$t,currentTrackVar:At}=w,It=(t,e)=>Math.round(t*100/e)?Math.round(t*100/e):0,Mt=({})=>{const t=p(Ct),e=p($t),a=p(At),r=i=>{if(t){const d=+i.target.value*e/100;G(d),Et.currentTime=d}},o=p(G);return s("div",{className:x.info,children:[s("div",{className:x.box,children:[n("h2",{className:x.title,children:a==null?void 0:a.title}),n("p",{children:X(e)})]}),s("div",{className:x.box,children:[n("h3",{className:x.title,children:a==null?void 0:a.author}),n("p",{children:X(o)})]}),n("input",{type:"range",disabled:!t,onChange:r,value:It(o,e)})]})},{audio:Lt,currentTrackVar:Bt,toggleAudio:K,initializeAudio:Ft}=w,Pt=({})=>{const t=p(Bt),{data:e}=A(T),a=e==null?void 0:e.getAllTracks,r=o=>{if(!!Lt.src)switch(o.code){case"Space":o.preventDefault(),K();break}};return l.exports.useEffect(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)),[]),l.exports.useEffect(()=>{t&&(Ft(t.src,a),K())},[t]),t?s("div",{className:R.player,children:[n(kt,{}),n(Nt,{className:R.musicImage}),n(Mt,{}),n(ft,{})]}):null},Dt=()=>s("div",{className:"container",children:[n(Pt,{}),n("main",{children:n(et,{})})]}),Ut="https://eyes-closed-server.herokuapp.com/graphql",Rt=le({uri:Ut}),Ot=new se,zt=new ce({link:Rt,cache:Ot});de.render(n(ue.StrictMode,{children:n(me,{client:zt,children:n(Dt,{})})}),document.getElementById("root"));
