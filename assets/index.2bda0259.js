var re=Object.defineProperty,ie=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var V=(t,e,n)=>e in t?re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))B.call(e,n)&&V(t,n,e[n]);if(b)for(var n of b(e))F.call(e,n)&&V(t,n,e[n]);return t},k=(t,e)=>ie(t,se(e));var p=(t,e)=>{var n={};for(var r in t)B.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&b)for(var r of b(t))e.indexOf(r)<0&&F.call(t,r)&&(n[r]=t[r]);return n};var c=(t,e,n)=>(V(t,typeof e!="symbol"?e+"":e,n),n);import{j as A,c as m,m as v,u as h,r as s,a as le,f as ce,b as de,d as I,e as ue,I as me,A as pe,R as he,g as ke,h as ve}from"./vendor.e5795c61.js";const _e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};_e();const ge="_playlist_kw8bu_1",ye="_title_kw8bu_23",fe="_head_kw8bu_33";var C={playlist:ge,title:ye,head:fe};const xe="_title_xynlk_1";var we={title:xe};const a=A.exports.jsx,l=A.exports.jsxs,Y=A.exports.Fragment,be=n=>{var r=n,{className:t}=r,e=p(r,["className"]);return a("div",k(u({className:t},e),{children:a("p",{className:we.title,children:"Connection Error"})}))},Ne="_block_cfywl_1",Te="_center_cfywl_9";var P={block:Ne,center:Te};const D=o=>{var i=o,{children:t,className:e,childsCenter:n}=i,r=p(i,["children","className","childsCenter"]);return a("div",k(u({className:m(P.block,e,{[P.center]:n})},r),{children:t}))},Se="_loading_clven_1",Ve="_load_clven_1";var Ce={loading:Se,load:Ve};const Z=({className:t})=>a("div",{className:m(Ce.loading,t)}),Ee="_tracksBlock_diz2w_1";var $e={tracksBlock:Ee};const Ae="_track_1tc8r_1",Ie="_info_1tc8r_63",Me="_text_1tc8r_77",Le="_active_1tc8r_95",Be="_trackBox_1tc8r_109";var _={track:Ae,info:Ie,text:Me,active:Le,trackBox:Be};const Fe=({title:t,active:e,subtitle:n,onClick:r})=>l("button",{onClick:()=>r(),className:m(_.track,{[_.active]:e}),children:[a("div",{className:_.trackBox}),l("div",{className:_.info,children:[a("h2",{className:_.text,children:t}),a("h3",{className:_.text,children:n})]})]});class Pe{constructor(){c(this,"DISABLE_TIME",200);c(this,"DEFAULT_VOLUME",.2);c(this,"audio",new Audio);c(this,"currentTrackVar",v(null));c(this,"isPlayingVar",v(!1));c(this,"canChangeTimeVar",v(!0));c(this,"volumeVar",v(this.DEFAULT_VOLUME));c(this,"currentTimeVar",v(0));c(this,"durationVar",v(0));c(this,"switchTrack",(e,n)=>{const r=this.currentTrackVar();if(!e||!r)return;const o=e.findIndex(i=>i.id===r.id);switch(n){case"NEXT":o===e.length-1?this.currentTrackVar(e[0]):this.currentTrackVar(e[o+1]);break;case"PREV":o===0?this.currentTrackVar(e[e.length-1]):this.currentTrackVar(e[o-1]);break}});c(this,"prevTrack",e=>this.switchTrack(e,"PREV"));c(this,"nextTrack",e=>this.switchTrack(e,"NEXT"));c(this,"toggleAudio",async()=>{if(this.audio.paused){this.isPlayingVar(!0);try{await this.audio.play()}catch(e){console.log(e)}}else this.isPlayingVar(!1),this.audio.pause()});c(this,"initializeAudio",(e,n)=>{this.audio.src=e,this.audio.ontimeupdate=()=>this.currentTimeVar(this.audio.currentTime),this.audio.onloadeddata=()=>{setTimeout(()=>{this.canChangeTimeVar(!0)},this.DISABLE_TIME),this.durationVar(this.audio.duration)},this.audio.onended=()=>{this.canChangeTimeVar(!1),this.nextTrack(n)},this.audio.volume=this.volumeVar()})}}const w=new Pe,De=({data:t})=>{const{currentTrackVar:e}=w,n=h(e),r=o=>()=>e(o);return a("ul",{className:$e.tracksBlock,children:t.map(o=>a("li",{children:a(Fe,{active:o.id===(n==null?void 0:n.id),onClick:r(o),title:o.title,subtitle:o.author})},o.id))})},Ue="_button_1c7vd_1";var je={button:Ue};const ee=r=>{var o=r,{children:t,className:e}=o,n=p(o,["children","className"]);return a("button",k(u({className:m(je.button,e)},n),{children:t}))},Re={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"file"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addTrack"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"file"},value:{kind:"Variable",name:{kind:"Name",value:"file"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"src"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"src"}}]}}]}}]},ze="__lock_1up8e_1",Oe="_modal_1up8e_9",qe="_overlay_1up8e_41";var N={_lock:ze,modal:Oe,overlay:qe};const U=document.getElementById("modal"),Xe=({className:t,children:e,open:n,onClose:r})=>{const o=i=>{(i.key==="Esc"||i.key==="Escape")&&r()};return s.exports.useEffect(()=>{document.body.classList.add(N._lock)},[]),s.exports.useEffect(()=>{if(document.body.classList.toggle(N._lock),n)return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[n]),!n||!U?a(Y,{}):le.exports.createPortal(a(ce,{children:a("div",{onClick:()=>r(),className:N.overlay,children:a("div",{onClick:i=>i.stopPropagation(),role:"dialog",className:m(N.modal,t),children:e})})}),U)},Ge="_form_xj18s_1",Ke="_btn_xj18s_13",Qe="_fileInput_xj18s_25";var E={form:Ge,btn:Ke,fileInput:Qe};const He="_input_uv6sf_1";var Je={input:He};const j=i=>{var d=i,{inputState:t,setInputState:e,labelText:n,className:r}=d,o=p(d,["inputState","setInputState","labelText","className"]);return l("label",{children:[a("h3",{children:n}),a("input",u({required:!0,className:m(Je.input,r),value:t,onChange:g=>e(g.target.value),type:"text"},o))]})},We="_block_r92fe_1",Ye="_title_r92fe_17";var R={block:We,title:Ye};const Ze=({title:t="Uploading track. Please wait.",className:e})=>l("div",{className:m(R.block,e),children:[a("p",{className:R.title,children:t}),a(Z,{})]}),et="_label_tov3n_1",tt="_input_tov3n_63";var z={label:et,input:tt};const nt=o=>{var i=o,{text:t,className:e,style:n}=i,r=p(i,["text","className","style"]);return l("label",{className:m(e,z.label),style:n,children:[t,a("input",u({className:z.input,type:"file",accept:"audio/*"},r))]})},at=({onSubmit:t})=>{var M;const[e,n]=s.exports.useState(null),[r,o]=s.exports.useState(""),[i,d]=s.exports.useState(""),[g,{loading:ne}]=de(Re),ae=S=>{var L;const y=(L=S.target.files)==null?void 0:L[0];y&&y.type.includes("audio/")?n(y):alert("Select audio/mpeg file")},oe=async S=>{S.preventDefault();try{await g({variables:{title:r,author:i,file:e},refetchQueries:[{query:T}]}),t(),d(""),o("")}catch(y){alert("An error occurred while uploading the track to the server"),console.log("Upload failed: ",y)}};return ne?a(Ze,{}):l("form",{className:E.form,action:"",onSubmit:oe,children:[a("h1",{children:"Upload Track"}),a(j,{inputState:i,setInputState:d,labelText:"Author"}),a(j,{inputState:r,setInputState:o,labelText:"Title"}),a(nt,{text:(M=e==null?void 0:e.name)!=null?M:"Chose Audio File",className:E.fileInput,required:!0,onChange:ae}),a(ee,{className:E.btn,type:"submit",children:"Upload Track"})]})},ot="_uploadModal_16r2l_1";var rt={uploadModal:ot};const it=({isOpen:t,onClose:e})=>a(Xe,{className:rt.uploadModal,open:t,onClose:e,children:a(at,{onSubmit:e})}),st=({})=>{const{data:t,loading:e,error:n}=I(T),r=t==null?void 0:t.getAllTracks,[o,i]=s.exports.useState(!1),d=()=>i(!1),g=()=>i(!0);return n?a(D,{children:a(be,{})}):e||!r?a(D,{childsCenter:!0,children:a(Z,{})}):l("div",{className:C.playlist,children:[l("div",{className:C.head,children:[a("h1",{className:C.title,children:`Playlist: ${r.length}`}),a(ee,{onClick:g,children:"Add new track"})]}),a(De,{data:r}),a(it,{isOpen:o,onClose:d})]})},lt="_player_s12o8_1",ct="_musicImage_s12o8_59";var O={player:lt,musicImage:ct};const dt="_rewindControls_12tjy_1",ut="_toggle_12tjy_27",mt="_arrow_12tjy_35",pt="_inverse_12tjy_43";var f={rewindControls:dt,toggle:ut,arrow:mt,inverse:pt};const ht=t=>s.exports.createElement("svg",u({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 485 485",style:{enableBackground:"new 0 0 485 485"},xmlSpace:"preserve",width:"1em",height:"1em"},t),s.exports.createElement("g",null,s.exports.createElement("path",{d:"M413.974,71.026C368.171,25.225,307.274,0,242.5,0S116.829,25.225,71.026,71.026C25.225,116.829,0,177.726,0,242.5 s25.225,125.671,71.026,171.474C116.829,459.775,177.726,485,242.5,485s125.671-25.225,171.474-71.026 C459.775,368.171,485,307.274,485,242.5S459.775,116.829,413.974,71.026z M242.5,455C125.327,455,30,359.673,30,242.5 S125.327,30,242.5,30S455,125.327,455,242.5S359.673,455,242.5,455z"}),s.exports.createElement("rect",{x:172.5,y:140,width:55,height:205}),s.exports.createElement("rect",{x:257.5,y:140,width:55,height:205}))),kt=t=>s.exports.createElement("svg",u({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 485 485",style:{enableBackground:"new 0 0 485 485"},xmlSpace:"preserve",width:"1em",height:"1em"},t),s.exports.createElement("g",null,s.exports.createElement("path",{d:"M413.974,71.026C368.171,25.225,307.274,0,242.5,0S116.829,25.225,71.026,71.026C25.225,116.829,0,177.726,0,242.5 s25.225,125.671,71.026,171.474C116.829,459.775,177.726,485,242.5,485s125.671-25.225,171.474-71.026 C459.775,368.171,485,307.274,485,242.5S459.775,116.829,413.974,71.026z M242.5,455C125.327,455,30,359.673,30,242.5 S125.327,30,242.5,30S455,125.327,455,242.5S359.673,455,242.5,455z"}),s.exports.createElement("polygon",{points:"181.062,336.575 343.938,242.5 181.062,148.425  "}))),q=t=>s.exports.createElement("svg",u({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 224.175 224.175",style:{enableBackground:"new 0 0 224.175 224.175"},xmlSpace:"preserve",width:"1em",height:"1em"},t),s.exports.createElement("g",null,s.exports.createElement("path",{d:"M185.513,0L185.513,0c-7.4,0-13.7,6.3-13.7,14.2v71.9L46.213,2.2c-2.1-1-4.7-2.1-7.9-2.1c-7.4,0-13.7,6.3-13.7,14.2V210 c0,11,12.6,17.8,21.5,11.5l125.6-83.4V210c-0.5,18.9,28.4,18.9,27.8,0V14.3C200.213,6.3,193.413,0,185.513,0z M52.513,183.7V39.9 l108.2,71.9L52.513,183.7z"}))),vt="_button_18l9v_1",_t="_icon_18l9v_57";var X={button:vt,icon:_t};const $=r=>{var o=r,{SvgIcon:t,className:e}=o,n=p(o,["SvgIcon","className"]);return a("button",k(u({className:m(X.button,e)},n),{children:a(t,{className:X.icon})}))},{prevTrack:gt,nextTrack:yt,toggleAudio:ft,isPlayingVar:xt}=w,wt=({})=>{const{data:t}=I(T),e=t==null?void 0:t.getAllTracks,n=h(xt),r=o=>o?ht:kt;return l(Y,{children:[a($,{className:f.toggle,onClick:()=>ft(),SvgIcon:r(n)}),l("div",{className:f.rewindControls,children:[a($,{SvgIcon:q,className:m(f.arrow,f.inverse),onClick:()=>gt(e)}),a($,{SvgIcon:q,className:f.arrow,onClick:()=>yt(e)})]})]})},bt="_box_1x3q1_1",Nt="_title_1x3q1_19";var G={box:bt,title:Nt};const{volumeVar:te,audio:Tt}=w,St=t=>{const e=+t.target.value/100;te(e)},Vt=({})=>{const t=h(te),e=Math.round(t*100);return s.exports.useEffect(()=>{Tt.volume=t},[t]),l("div",{className:G.box,children:[l("p",{className:G.title,children:["Volume: ",e,"%"]}),a("input",{type:"range",value:e,onChange:St})]})},Ct="_box_1i7xp_1",Et="_icon_1i7xp_25";var K={box:Ct,icon:Et};const $t=t=>s.exports.createElement("svg",u({width:"1em",height:"1em",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},t),s.exports.createElement("path",{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"})),At=n=>{var r=n,{className:t}=r,e=p(r,["className"]);return a("div",k(u({className:m(K.box,t)},e),{children:a($t,{className:K.icon})}))},Q=t=>t<10?`0${t}`:`${t}`,H=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${Q(e)}:${Q(n)}`},It="_info_px7rt_1",Mt="_box_px7rt_9",Lt="_title_px7rt_23";var x={info:It,box:Mt,title:Lt};const{currentTimeVar:J,canChangeTimeVar:Bt,audio:Ft,durationVar:Pt,currentTrackVar:Dt}=w,Ut=(t,e)=>Math.round(t*100/e)?Math.round(t*100/e):0,jt=({})=>{const t=h(Bt),e=h(Pt),n=h(Dt),r=i=>{if(t){const d=+i.target.value*e/100;J(d),Ft.currentTime=d}},o=h(J);return l("div",{className:x.info,children:[l("div",{className:x.box,children:[a("h2",{className:x.title,children:n==null?void 0:n.title}),a("p",{children:H(e)})]}),l("div",{className:x.box,children:[a("h3",{className:x.title,children:n==null?void 0:n.author}),a("p",{children:H(o)})]}),a("input",{type:"range",disabled:!t,onChange:r,value:Ut(o,e)})]})},{audio:Rt,currentTrackVar:zt,toggleAudio:W,initializeAudio:Ot}=w,qt=({})=>{const t=h(zt),{data:e}=I(T),n=e==null?void 0:e.getAllTracks,r=o=>{if(!!Rt.src)switch(o.code){case"Space":o.preventDefault(),W();break}};return s.exports.useEffect(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)),[]),s.exports.useEffect(()=>{t&&(Ot(t.src,n),W())},[t]),t?l("div",{className:O.player,children:[a(wt,{}),a(At,{className:O.musicImage}),a(jt,{}),a(Vt,{})]}):null},Xt=()=>l("div",{className:"container",children:[a(qt,{}),a("main",{children:a(st,{})})]}),Gt="https://eyes-closed-server.herokuapp.com/graphql",Kt=ue({uri:Gt}),Qt=new me,Ht=new pe({link:Kt,cache:Qt});he.render(a(ke.StrictMode,{children:a(ve,{client:Ht,children:a(Xt,{})})}),document.getElementById("root"));
