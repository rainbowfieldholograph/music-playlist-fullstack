var se=Object.defineProperty,ne=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var L=(t,e,s)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,b=(t,e)=>{for(var s in e||(e={}))V.call(e,s)&&L(t,s,e[s]);if(k)for(var s of k(e))q.call(e,s)&&L(t,s,e[s]);return t},T=(t,e)=>ne(t,le(e));var N=(t,e)=>{var s={};for(var n in t)V.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&k)for(var n of k(t))e.indexOf(n)<0&&q.call(t,n)&&(s[n]=t[n]);return s};import{j as A,c as f,g as Q,a as re,I as ce,A as ae,m as x,u as y,r as u,b as ie,d as de,e as J,F as C,f as ue,h as me,i as _e,k as pe,l as fe,R as he,n as ve,o as ye}from"./vendor.402c6bd1.js";const ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}};ge();const xe="_playlist_11scu_1",ke="_title_11scu_23",be="_head_11scu_33",Ne="_uploadModal_11scu_45",$e="_btn_11scu_57";var $={playlist:xe,title:ke,head:be,uploadModal:Ne,btn:$e};const Be="_title_xynlk_1";var we={title:Be};const o=A.exports.jsx,a=A.exports.jsxs,F=A.exports.Fragment,Ce=()=>o("div",{children:o("p",{className:we.title,children:"Connection Error"})}),Ie="_block_cfywl_1",Te="_center_cfywl_9";var R={block:Ie,center:Te};const j=l=>{var r=l,{children:t,className:e,childsCenter:s}=r,n=N(r,["children","className","childsCenter"]);return o("div",T(b({className:f(R.block,e,{[R.center]:s})},n),{children:t}))},Me="_loading_clven_1",Se="_load_clven_1";var Ae={loading:Me,load:Se};const W=({className:t})=>o("div",{className:f(Ae.loading,t)}),X=Q`
  query GetAllTracks {
    getAllTracks {
      id
      title
      author
      src
    }
  }
`,Pe="_tracksBlock_diz2w_1";var Ee={tracksBlock:Pe};const Le="_track_dy45d_1",Ve="_info_dy45d_41",qe="_innerBox_dy45d_61",Fe="_text_dy45d_69",Re="_active_dy45d_89",je="_trackBox_dy45d_107";var m={track:Le,info:Ve,innerBox:qe,text:Fe,active:Re,trackBox:je};const De=({title:t,active:e,subtitle:s,onClick:n})=>a("button",{onClick:()=>n(),className:f(m.track,{[m.active]:e}),children:[o("div",{className:m.trackBox}),a("div",{className:m.info,children:[o("div",{className:m.innerBox,children:o("h2",{className:m.text,children:t})}),o("div",{className:m.innerBox,children:o("h3",{className:m.text,children:s})})]})]}),p=x(null),M=x(!1),D=x(1),S=x(0),O=x(0),Oe="https://eyes-closed-server.herokuapp.com/graphql",ze=re({uri:Oe}),Ue=new ce,Ke=new ae({link:ze,cache:Ue}),Ge=({data:t})=>{const e=y(p),s=n=>()=>p(n);return o("ul",{className:Ee.tracksBlock,children:t.map(n=>o("li",{children:o(De,{active:n.id===(e==null?void 0:e.id),onClick:s(n),title:n.title,subtitle:n.author})},n.id))})},He="_button_ptj0d_1";var Qe={button:He};const Je=n=>{var l=n,{children:t,className:e}=l,s=N(l,["children","className"]);return o("button",T(b({className:f(Qe.button,e)},s),{children:t}))},We="__lock_rqvxe_1",Xe="_modal_rqvxe_9",Ye="_overlay_rqvxe_39";var B={_lock:We,modal:Xe,overlay:Ye};const z=document.getElementById("modal"),Ze=({className:t,children:e,open:s,onClose:n})=>(u.exports.useEffect(()=>{document.body.classList.add(B._lock)},[]),u.exports.useEffect(()=>{document.body.classList.toggle(B._lock)},[s]),!s||!z?o(F,{}):ie.exports.createPortal(a(F,{children:[o("div",{onClick:n,className:B.overlay}),o("div",{className:f(B.modal,t),children:e})]}),z));const et=Q`
  mutation addTrack($title: String!, $author: String!, $file: Upload!) {
    addTrack(title: $title, author: $author, file: $file) {
      src
      author
      title
      id
    }
  }
`,tt="_input_uv6sf_1";var ot={input:tt};u.exports.memo(r=>{var c=r,{inputState:t,setInputState:e,labelText:s,className:n}=c,l=N(c,["inputState","setInputState","labelText","className"]);return a("label",{children:[o("h3",{children:s}),o("input",b({required:!0,className:f(ot.input,n),value:t,onChange:_=>e(_.target.value),type:"text"},l))]})});const st="_block_r92fe_1",nt="_title_r92fe_17";var U={block:st,title:nt};const lt=({title:t="Uploading track. Please wait.",className:e})=>a("div",{className:f(U.block,e),children:[o("p",{className:U.title,children:t}),o(W,{})]}),rt=({onSubmit:t})=>(u.exports.useState(null),u.exports.useState(""),u.exports.useState(""),de(et),o(lt,{})),ct=()=>{const{data:t,loading:e,error:s}=J(X),[n,l]=u.exports.useState(!1),r=t==null?void 0:t.getAllTracks;if(s)return o(j,{children:o(Ce,{})});if(e||!r)return o(j,{childsCenter:!0,children:o(W,{})});const c=()=>()=>l(!0),_=()=>()=>l(!1);return a("section",{className:$.playlist,children:[a("div",{className:$.head,children:[o("h1",{className:$.title,children:`Playlist: ${r.length}`}),o(Je,{onClick:c(),children:"Add new track"})]}),o(Ge,{data:r}),o(Ze,{className:$.uploadModal,open:n,onClose:_(),children:o(rt,{onSubmit:_()})})]})},at="_player_1glm3_1",it="_musicImage_1glm3_57";var K={player:at,musicImage:it};const dt="_wrapper_sfmsf_1",ut="_rewindControls_sfmsf_19",mt="_musicImage_sfmsf_29",_t="_button_sfmsf_37";var h={wrapper:dt,rewindControls:ut,musicImage:mt,button:_t};const pt="_box_dmcht_1";var ft={box:pt};const Y=()=>o("div",{className:ft.box,children:o(C,{style:{fontSize:"1.7rem"},icon:ue,color:"black"})}),ht=({toggleAudio:t,nextTrack:e,prevTrack:s,playing:n})=>a("div",{className:h.wrapper,children:[o("div",{className:h.musicImage,children:o(Y,{})}),o("button",{className:h.button,onClick:()=>t(),children:o(C,{size:"3x",icon:n?me:_e,color:"black"})}),a("div",{className:h.rewindControls,children:[o("button",{className:h.button,onClick:()=>s(),children:o(C,{size:"2x",icon:pe,color:"black"})}),o("button",{className:h.button,onClick:()=>e(),children:o(C,{size:"2x",icon:fe,color:"black"})})]})]}),vt="_box_e863m_1",yt="_title_e863m_17";var G={box:vt,title:yt};const gt=({volumeState:t,handleVolume:e})=>a("div",{className:G.box,children:[a("p",{className:G.title,children:["Volume: ",Math.round(t*100),"%"]}),o("input",{className:"clickable",type:"range",value:Math.round(t*100),onChange:s=>e(s)})]}),H=t=>{const e=Math.floor(t/60),s=Math.floor(t%60),n=e<10?`0${e}`:`${e}`,l=s<10?`0${s}`:`${s}`;return`${n}:${l}`},xt="_infoInnerBox_1xn2v_1",kt="_title_1xn2v_13",bt="_progressBar_1xn2v_29",Nt="_info_1xn2v_1";var v={infoInnerBox:xt,title:kt,progressBar:bt,info:Nt};const $t=({track:t,duration:e,currentTime:s,handleProgress:n,canChangeTime:l})=>a("div",{className:v.info,children:[a("div",{className:v.infoInnerBox,children:[o("h2",{className:v.title,children:t==null?void 0:t.title}),o("p",{children:H(e)})]}),a("div",{className:v.infoInnerBox,children:[o("h3",{className:v.title,children:t==null?void 0:t.author}),o("p",{children:H(s)})]}),o("input",{className:v.progressBar,type:"range",disabled:!l,onChange:n,value:e?Math.round(s*100/e):0})]});let d=new Audio,w=!0;const Bt=200,wt=()=>{const t=y(O),e=y(p),s=y(S),n=y(M),l=y(D),{data:r}=J(X),c=r==null?void 0:r.getAllTracks,_=i=>{if(!!d.src)switch(i.code){case"Space":i.preventDefault(),I();break}};u.exports.useEffect(()=>(window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)),[]);const Z=()=>{if(!c||!e)return;const i=c.indexOf(e);p(i===0?c[c.length-1]:c[i-1])},P=()=>{if(!c||!e)return;const i=c.indexOf(e);i===c.length-1?p(c[0]):p(c[i+1])},ee=()=>P();u.exports.useEffect(()=>{e&&(d.src=e.src,d.ontimeupdate=()=>S(d.currentTime),d.onloadeddata=()=>{setTimeout(()=>{w=!0},Bt),O(d.duration)},d.onended=()=>{w=!1,ee()},I())},[e]);const I=async()=>{if(d.paused){M(!0);try{await d.play()}catch(i){console.log(i)}}else M(!1),d.pause()},te=i=>{const E=+i.target.value;if(w){const g=E*t/100;d.currentTime=g,S(g)}},oe=i=>{const g=+i.target.value/100;D(g),d.volume=g};return e?a("div",{className:K.player,children:[o(ht,{toggleAudio:I,nextTrack:P,prevTrack:Z,playing:n}),o("div",{className:K.musicImage,children:o(Y,{})}),o($t,{track:e,duration:t,currentTime:s,handleProgress:te,canChangeTime:w}),o(gt,{volumeState:l,handleVolume:oe})]}):null},Ct=()=>a("div",{className:"container",children:[o(wt,{}),o(ct,{})]});he.render(o(ve.StrictMode,{children:o(ye,{client:Ke,children:o(Ct,{})})}),document.getElementById("root"));
