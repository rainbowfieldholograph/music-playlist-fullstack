var oe=Object.defineProperty,se=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var O=(e,t,l)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,y=(e,t)=>{for(var l in t||(t={}))q.call(t,l)&&O(e,l,t[l]);if(C)for(var l of C(t))j.call(t,l)&&O(e,l,t[l]);return e},x=(e,t)=>se(e,ie(t));var f=(e,t)=>{var l={};for(var a in e)q.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(e!=null&&C)for(var a of C(e))t.indexOf(a)<0&&j.call(e,a)&&(l[a]=e[a]);return l};import{j as P,c as m,m as w,u as b,r as k,a as re,f as ce,b as de,d as te,e as ue,I as me,A as pe,R as ke,g as _e,h as ve}from"./vendor.e5795c61.js";const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}};he();const ye="_playlist_dy7d3_1",fe="_title_dy7d3_23",ge="_head_dy7d3_33",be="_btn_dy7d3_45";var M={playlist:ye,title:fe,head:ge,btn:be};const Ne="_title_xynlk_1";var xe={title:Ne};const n=P.exports.jsx,r=P.exports.jsxs,ne=P.exports.Fragment,Te=l=>{var a=l,{className:e}=a,t=f(a,["className"]);return n("div",x(y({className:e},t),{children:n("p",{className:xe.title,children:"Connection Error"})}))},we="_block_cfywl_1",Se="_center_cfywl_9";var R={block:we,center:Se};const z=o=>{var s=o,{children:e,className:t,childsCenter:l}=s,a=f(s,["children","className","childsCenter"]);return n("div",x(y({className:m(R.block,t,{[R.center]:l})},a),{children:e}))},$e="_loading_clven_1",Ce="_load_clven_1";var Ie={loading:$e,load:Ce};const ae=({className:e})=>n("div",{className:m(Ie.loading,e)}),Ae="_tracksBlock_diz2w_1";var Ee={tracksBlock:Ae};const Fe="_track_i18so_1",Me="_info_i18so_39",Ve="_text_i18so_53",Be="_active_i18so_71",De="_trackBox_i18so_85";var g={track:Fe,info:Me,text:Ve,active:Be,trackBox:De};const Pe=({title:e,active:t,subtitle:l,onClick:a})=>r("button",{onClick:()=>a(),className:m(g.track,{[g.active]:t}),children:[n("div",{className:g.trackBox}),r("div",{className:g.info,children:[n("h2",{className:g.text,children:e}),n("h3",{className:g.text,children:l})]})]}),h=w(null),V=w(!1),G=w(.5),B=w(0),K=w(0),Le=({data:e})=>{const t=b(h),l=a=>()=>h(a);return n("ul",{className:Ee.tracksBlock,children:e.map(a=>n("li",{children:n(Pe,{active:a.id===(t==null?void 0:t.id),onClick:l(a),title:a.title,subtitle:a.author})},a.id))})},Ue="_button_ptj0d_1";var Oe={button:Ue};const le=a=>{var o=a,{children:e,className:t}=o,l=f(o,["children","className"]);return n("button",x(y({className:m(Oe.button,t)},l),{children:e}))},qe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"file"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addTrack"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"file"},value:{kind:"Variable",name:{kind:"Name",value:"file"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"src"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},L={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"src"}}]}}]}}]},je="__lock_1up8e_1",Re="_modal_1up8e_9",ze="_overlay_1up8e_41";var I={_lock:je,modal:Re,overlay:ze};const Q=document.getElementById("modal"),Ge=({className:e,children:t,open:l,onClose:a})=>{const o=s=>{(s.key==="Esc"||s.key==="Escape")&&a()};return k.exports.useEffect(()=>{document.body.classList.add(I._lock)},[]),k.exports.useEffect(()=>{if(document.body.classList.toggle(I._lock),l)return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[l]),!l||!Q?n(ne,{}):re.exports.createPortal(n(ce,{children:n("div",{onClick:()=>a(),className:I.overlay,children:n("div",{onClick:s=>s.stopPropagation(),role:"dialog",className:m(I.modal,e),children:t})})}),Q)},Ke="_form_1mtor_1",Qe="_btn_1mtor_15",He="_uploadTitle_1mtor_27";var D={form:Ke,btn:Qe,uploadTitle:He};const Je="_input_uv6sf_1";var We={input:Je};const H=s=>{var i=s,{inputState:e,setInputState:t,labelText:l,className:a}=i,o=f(i,["inputState","setInputState","labelText","className"]);return r("label",{children:[n("h3",{children:l}),n("input",y({required:!0,className:m(We.input,a),value:e,onChange:u=>t(u.target.value),type:"text"},o))]})},Xe="_block_r92fe_1",Ye="_title_r92fe_17";var J={block:Xe,title:Ye};const Ze=({title:e="Uploading track. Please wait.",className:t})=>r("div",{className:m(J.block,t),children:[n("p",{className:J.title,children:e}),n(ae,{})]}),et=({onSubmit:e})=>{const[t,l]=k.exports.useState(null),[a,o]=k.exports.useState(""),[s,i]=k.exports.useState(""),[u,{loading:E}]=de(qe),S=_=>{var $;const v=($=_.target.files)==null?void 0:$[0];v&&v.type.includes("audio/")?l(v):alert("Select audio/mpeg file")},F=async _=>{_.preventDefault();try{await u({variables:{title:a,author:s,file:t},refetchQueries:[{query:L}]}),e(),i(""),o("")}catch(v){alert("An error occurred while uploading the track to the server"),console.log("Upload failed: ",v)}};return E?n(Ze,{}):r("form",{className:D.form,action:"",onSubmit:F,children:[n("h1",{children:"Upload Track"}),n(H,{inputState:s,setInputState:i,labelText:"Author"}),n(H,{inputState:a,setInputState:o,labelText:"Title"}),r("label",{children:[n("h1",{className:D.uploadTitle,children:"Upload audio File"}),n("input",{required:!0,type:"file",accept:"audio/*",onChange:S})]}),n(le,{className:D.btn,type:"submit",children:"Upload Track"})]})},tt="_uploadModal_16r2l_1";var nt={uploadModal:tt};const at=({isOpen:e,onClose:t})=>n(Ge,{className:nt.uploadModal,open:e,onClose:t,children:n(et,{onSubmit:t})}),lt=({})=>{const{data:e,loading:t,error:l}=te(L),[a,o]=k.exports.useState(!1),s=()=>o(!1),i=()=>o(!0),u=e==null?void 0:e.getAllTracks;return l?n(z,{children:n(Te,{})}):t||!u?n(z,{childsCenter:!0,children:n(ae,{})}):r("div",{className:M.playlist,children:[r("div",{className:M.head,children:[n("h1",{className:M.title,children:`Playlist: ${u.length}`}),n(le,{onClick:i,children:"Add new track"})]}),n(Le,{data:u}),n(at,{isOpen:a,onClose:s})]})},ot="_player_129rz_1";var st={player:ot};const it="_rewindControls_17y3e_1",rt="_button_17y3e_13",ct="_toggleButton_17y3e_41",dt="_arrow_17y3e_59",ut="_inverse_17y3e_67";var p={rewindControls:it,button:rt,toggleButton:ct,arrow:dt,inverse:ut},mt="/music-playlist-fullstack/assets/playIcon.916a18da.svg",W="/music-playlist-fullstack/assets/arrowIcon.f4b42ba4.svg",pt="/music-playlist-fullstack/assets/pauseIcon.8b6d1de2.svg";const kt=({toggleAudio:e,nextTrack:t,prevTrack:l,playing:a})=>r(ne,{children:[n("button",{className:m(p.button,p.toggleButton),onClick:()=>e(),children:n("img",{src:a?pt:mt,alt:"play"})}),r("div",{className:p.rewindControls,children:[n("button",{className:p.button,onClick:()=>l(),children:n("img",{className:m(p.arrow,p.inverse),src:W,alt:"back"})}),n("button",{className:p.button,onClick:()=>t(),children:n("img",{className:p.arrow,src:W,alt:"forward"})})]})]}),_t="_box_1x3q1_1",vt="_title_1x3q1_19";var X={box:_t,title:vt};const ht=({volumeState:e,handleVolume:t})=>{const l=Math.round(e*100);return r("div",{className:X.box,children:[r("p",{className:X.title,children:["Volume: ",l,"%"]}),n("input",{type:"range",value:l,onChange:a=>t(a)})]})},yt="_box_r74l1_1",ft="_image_r74l1_21";var Y={box:yt,image:ft},gt="/music-playlist-fullstack/assets/musicIcon.4498a0e2.svg";const bt=l=>{var a=l,{className:e}=a,t=f(a,["className"]);return n("div",x(y({className:m(Y.box,e)},t),{children:n("img",{className:Y.image,src:gt,alt:"music"})}))},Z=e=>e<10?`0${e}`:`${e}`,ee=e=>{const t=Math.floor(e/60),l=Math.floor(e%60);return`${Z(t)}:${Z(l)}`},Nt="_info_px7rt_1",xt="_box_px7rt_9",Tt="_title_px7rt_23";var T={info:Nt,box:xt,title:Tt};const wt=(e,t)=>t?Math.round(e*100/t):0,St=({track:e,duration:t,currentTime:l,handleProgress:a,canChangeTime:o})=>r("div",{className:T.info,children:[r("div",{className:T.box,children:[n("h2",{className:T.title,children:e==null?void 0:e.title}),n("p",{children:ee(t)})]}),r("div",{className:T.box,children:[n("h3",{className:T.title,children:e==null?void 0:e.author}),n("p",{children:ee(l)})]}),n("input",{type:"range",disabled:!o,onChange:a,value:wt(l,t)})]});let d=new Audio,A=!0;const $t=200,Ct=({})=>{const e=b(K),t=b(h),l=b(B),a=b(V),o=b(G),{data:s}=te(L),i=s==null?void 0:s.getAllTracks,u=c=>{if(!!d.src)switch(c.code){case"Space":c.preventDefault(),_();break}};k.exports.useEffect(()=>(d.volume=o,window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)),[]);const E=()=>{if(!i||!t)return;const c=i.indexOf(t);h(c===0?i[i.length-1]:i[c-1])},S=()=>{if(!i||!t)return;const c=i.indexOf(t);c===i.length-1?h(i[0]):h(i[c+1])},F=()=>S();k.exports.useEffect(()=>{t&&(d.src=t.src,d.ontimeupdate=()=>B(d.currentTime),d.onloadeddata=()=>{setTimeout(()=>{A=!0},$t),K(d.duration)},d.onended=()=>{A=!1,F()},_())},[t]);const _=async()=>{if(d.paused){V(!0);try{await d.play()}catch(c){console.log(c)}}else V(!1),d.pause()},v=c=>{const U=+c.target.value;if(A){const N=U*e/100;d.currentTime=N,B(N)}},$=c=>{const N=+c.target.value/100;G(N),d.volume=N};return t?r("div",{className:st.player,children:[n(kt,{toggleAudio:_,nextTrack:S,prevTrack:E,playing:a}),n(bt,{}),n(St,{track:t,duration:e,currentTime:l,handleProgress:v,canChangeTime:A}),n(ht,{volumeState:o,handleVolume:$})]}):null},It=()=>r("div",{className:"container",children:[n("header",{children:n(Ct,{})}),n("main",{children:n(lt,{})})]}),At="https://eyes-closed-server.herokuapp.com/graphql",Et=ue({uri:At}),Ft=new me,Mt=new pe({link:Et,cache:Ft});ke.render(n(_e.StrictMode,{children:n(ve,{client:Mt,children:n(It,{})})}),document.getElementById("root"));
