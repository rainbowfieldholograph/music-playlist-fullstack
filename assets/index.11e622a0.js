var le=Object.defineProperty,ie=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var z=(e,t,a)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))O.call(t,a)&&z(e,a,t[a]);if(B)for(var a of B(t))q.call(t,a)&&z(e,a,t[a]);return e},C=(e,t)=>ie(e,se(t));var N=(e,t)=>{var a={};for(var o in e)O.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&B)for(var o of B(e))t.indexOf(o)<0&&q.call(e,o)&&(a[o]=e[o]);return a};import{j as L,c as p,a as re,I as ce,A as de,m as T,u as y,r as m,b as ue,f as me,d as pe,e as te,F,g as ke,h as _e,i as he,k as fe,l as ve,R as ye,n as ge,o as be}from"./vendor.b5fae564.js";const Ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}};Ne();const xe="_playlist_dy7d3_1",Te="_title_dy7d3_23",Se="_head_dy7d3_33",$e="_btn_dy7d3_45";var V={playlist:xe,title:Te,head:Se,btn:$e};const Be="_title_xynlk_1";var Ce={title:Be};const n=L.exports.jsx,r=L.exports.jsxs,ne=L.exports.Fragment,we=a=>{var o=a,{className:e}=o,t=N(o,["className"]);return n("div",C(b({className:e},t),{children:n("p",{className:Ce.title,children:"Connection Error"})}))},Ie="_block_cfywl_1",Fe="_center_cfywl_9";var R={block:Ie,center:Fe};const G=l=>{var i=l,{children:e,className:t,childsCenter:a}=i,o=N(i,["children","className","childsCenter"]);return n("div",C(b({className:p(R.block,t,{[R.center]:a})},o),{children:e}))},Ae="_loading_clven_1",Me="_load_clven_1";var Ve={loading:Ae,load:Me};const ae=({className:e})=>n("div",{className:p(Ve.loading,e)}),Pe="_tracksBlock_diz2w_1";var De={tracksBlock:Pe};const Ee="_track_1tzts_1",Le="_info_1tzts_39",je="_text_1tzts_53",Ue="_active_1tzts_71",ze="_trackBox_1tzts_85";var f={track:Ee,info:Le,text:je,active:Ue,trackBox:ze};const Oe=({title:e,active:t,subtitle:a,onClick:o})=>r("button",{onClick:()=>o(),className:p(f.track,{[f.active]:t}),children:[n("div",{className:f.trackBox}),r("div",{className:f.info,children:[n("span",{children:n("h2",{className:f.text,children:e})}),n("div",{children:n("h3",{className:f.text,children:a})})]})]}),h=T(null),P=T(!1),K=T(.5),D=T(0),Q=T(0),qe="https://eyes-closed-server.herokuapp.com/graphql",Re=re({uri:qe}),Ge=new ce,Ke=new de({link:Re,cache:Ge}),Qe=({data:e})=>{const t=y(h),a=o=>()=>h(o);return n("ul",{className:De.tracksBlock,children:e.map(o=>n("li",{children:n(Oe,{active:o.id===(t==null?void 0:t.id),onClick:a(o),title:o.title,subtitle:o.author})},o.id))})},He="_button_ptj0d_1";var Je={button:He};const oe=o=>{var l=o,{children:e,className:t}=l,a=N(l,["children","className"]);return n("button",C(b({className:p(Je.button,t)},a),{children:e}))},We={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"file"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addTrack"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"file"},value:{kind:"Variable",name:{kind:"Name",value:"file"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"src"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getAllTracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"author"}},{kind:"Field",name:{kind:"Name",value:"src"}}]}}]}}]},Xe="__lock_1up8e_1",Ye="_modal_1up8e_9",Ze="_overlay_1up8e_41";var w={_lock:Xe,modal:Ye,overlay:Ze};const H=document.getElementById("modal"),et=({className:e,children:t,open:a,onClose:o})=>(m.exports.useEffect(()=>{document.body.classList.add(w._lock)},[]),m.exports.useEffect(()=>{document.body.classList.toggle(w._lock)},[a]),!a||!H?n(ne,{}):ue.exports.createPortal(n(me,{children:n("div",{onClick:()=>o(),className:w.overlay,children:n("div",{onClick:l=>l.stopPropagation(),role:"dialog",className:p(w.modal,e),children:t})})}),H)),tt="_form_1mtor_1",nt="_btn_1mtor_15",at="_uploadTitle_1mtor_27";var E={form:tt,btn:nt,uploadTitle:at};const ot="_input_uv6sf_1";var lt={input:ot};const J=i=>{var s=i,{inputState:e,setInputState:t,labelText:a,className:o}=s,l=N(s,["inputState","setInputState","labelText","className"]);return r("label",{children:[n("h3",{children:a}),n("input",b({required:!0,className:p(lt.input,o),value:e,onChange:u=>t(u.target.value),type:"text"},l))]})},it="_block_r92fe_1",st="_title_r92fe_17";var W={block:it,title:st};const rt=({title:e="Uploading track. Please wait.",className:t})=>r("div",{className:p(W.block,t),children:[n("p",{className:W.title,children:e}),n(ae,{})]}),ct=({onSubmit:e})=>{const[t,a]=m.exports.useState(null),[o,l]=m.exports.useState(""),[i,s]=m.exports.useState(""),[u,{loading:A}]=pe(We),S=k=>{var $;const _=($=k.target.files)==null?void 0:$[0];_&&_.type.includes("audio/")?a(_):alert("Select audio/mpeg file")},M=async k=>{k.preventDefault();try{await u({variables:{title:o,author:i,file:t},refetchQueries:[{query:j}]}),e(),s(""),l("")}catch(_){alert("An error occurred while uploading the track to the server"),console.log("Upload failed: ",_)}};return A?n(rt,{}):r("form",{className:E.form,action:"",onSubmit:M,children:[n("h1",{children:"Upload Track"}),n(J,{inputState:i,setInputState:s,labelText:"Author"}),n(J,{inputState:o,setInputState:l,labelText:"Title"}),r("label",{children:[n("h1",{className:E.uploadTitle,children:"Upload audio File"}),n("input",{required:!0,type:"file",accept:"audio/*",onChange:S})]}),n(oe,{className:E.btn,type:"submit",children:"Upload Track"})]})},dt="_uploadModal_16r2l_1";var ut={uploadModal:dt};const mt=({isOpen:e,onClose:t})=>n(et,{className:ut.uploadModal,open:e,onClose:t,children:n(ct,{onSubmit:t})}),pt=({})=>{const{data:e,loading:t,error:a}=te(j),[o,l]=m.exports.useState(!1),i=()=>l(!1),s=()=>l(!0),u=e==null?void 0:e.getAllTracks;return a?n(G,{children:n(we,{})}):t||!u?n(G,{childsCenter:!0,children:n(ae,{})}):r("section",{className:V.playlist,children:[r("div",{className:V.head,children:[n("h1",{className:V.title,children:`Playlist: ${u.length}`}),n(oe,{onClick:s,children:"Add new track"})]}),n(Qe,{data:u}),n(mt,{isOpen:o,onClose:i})]})},kt="_player_1x5nx_1",_t="_musicImage_1x5nx_55";var X={player:kt,musicImage:_t};const ht="_rewindControls_1mt0o_1",ft="_button_1mt0o_13",vt="_toggleButton_1mt0o_35";var x={rewindControls:ht,button:ft,toggleButton:vt};const yt=({toggleAudio:e,nextTrack:t,prevTrack:a,playing:o})=>r(ne,{children:[n("button",{className:p(x.button,x.toggleButton),onClick:()=>e(),children:n(F,{size:"3x",icon:o?ke:_e,color:"black"})}),r("div",{className:x.rewindControls,children:[n("button",{className:x.button,onClick:()=>a(),children:n(F,{size:"2x",icon:he,color:"black"})}),n("button",{className:x.button,onClick:()=>t(),children:n(F,{size:"2x",icon:fe,color:"black"})})]})]}),gt="_box_1x3q1_1",bt="_title_1x3q1_19";var Y={box:gt,title:bt};const Nt=({volumeState:e,handleVolume:t})=>r("div",{className:Y.box,children:[r("p",{className:Y.title,children:["Volume: ",Math.round(e*100),"%"]}),n("input",{className:"clickable",type:"range",value:Math.round(e*100),onChange:a=>t(a)})]}),xt="_box_dmcht_1";var Tt={box:xt};const St=({})=>n("div",{className:Tt.box,children:n(F,{style:{fontSize:"1.7rem"},icon:ve,color:"black"})}),Z=e=>e<10?`0${e}`:`${e}`,ee=e=>{const t=Math.floor(e/60),a=Math.floor(e%60);return`${Z(t)}:${Z(a)}`},$t="_infoInnerBox_jt7d9_1",Bt="_title_jt7d9_13",Ct="_progressBar_jt7d9_29",wt="_info_jt7d9_1";var v={infoInnerBox:$t,title:Bt,progressBar:Ct,info:wt};const It=({track:e,duration:t,currentTime:a,handleProgress:o,canChangeTime:l})=>r("div",{className:v.info,children:[r("div",{className:v.infoInnerBox,children:[n("h2",{className:v.title,children:e==null?void 0:e.title}),n("p",{children:ee(t)})]}),r("div",{className:v.infoInnerBox,children:[n("h3",{className:v.title,children:e==null?void 0:e.author}),n("p",{children:ee(a)})]}),n("input",{className:v.progressBar,type:"range",disabled:!l,onChange:o,value:t?Math.round(a*100/t):0})]});let d=new Audio,I=!0;const Ft=200,At=({})=>{const e=y(Q),t=y(h),a=y(D),o=y(P),l=y(K),{data:i}=te(j),s=i==null?void 0:i.getAllTracks,u=c=>{if(!!d.src)switch(c.code){case"Space":c.preventDefault(),k();break}};m.exports.useEffect(()=>(window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)),[]);const A=()=>{if(!s||!t)return;const c=s.indexOf(t);h(c===0?s[s.length-1]:s[c-1])},S=()=>{if(!s||!t)return;const c=s.indexOf(t);c===s.length-1?h(s[0]):h(s[c+1])},M=()=>S();m.exports.useEffect(()=>{t&&(d.src=t.src,d.ontimeupdate=()=>D(d.currentTime),d.onloadeddata=()=>{setTimeout(()=>{I=!0},Ft),Q(d.duration)},d.onended=()=>{I=!1,M()},k())},[t]);const k=async()=>{if(d.paused){P(!0);try{await d.play()}catch(c){console.log(c)}}else P(!1),d.pause()},_=c=>{const U=+c.target.value;if(I){const g=U*e/100;d.currentTime=g,D(g)}},$=c=>{const g=+c.target.value/100;K(g),d.volume=g};return t?r("div",{className:X.player,children:[n(yt,{toggleAudio:k,nextTrack:S,prevTrack:A,playing:o}),n("div",{className:X.musicImage,children:n(St,{})}),n(It,{track:t,duration:e,currentTime:a,handleProgress:_,canChangeTime:I}),n(Nt,{volumeState:l,handleVolume:$})]}):null},Mt=()=>r("div",{className:"container",children:[n(At,{}),n(pt,{})]});ye.render(n(ge.StrictMode,{children:n(be,{client:Ke,children:n(Mt,{})})}),document.getElementById("root"));
